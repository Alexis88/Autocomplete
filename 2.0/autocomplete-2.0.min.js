"use strict";var autocomplete=function(){return this};autocomplete.prototype={load:function(e){var t=this;this.words=null,this.span=null,this.elem=null,this.xhr=null,this.aux=null,this.cls="highlight",this.container=document.createElement("div"),this.source=e.words,this.id=e.id||"dlContainer",this.container.id=this.id,this.container.style.display="none",this.hover=e.optionHover||"gold",this.back=e.backList||"lightyellow",this.container.style.background=this.back||"lightyellow",this.container.style.border=e.borderList||".1rem peru solid",this.container.style.position="absolute",this.container.style.zIndex=9999,this.select=e.select,this.value=e.value,this.data=null,document.addEventListener("DOMContentLoaded",function(){t.ready(e.target)},!1)},ready:function(e){document.body.appendChild(this.container),this.apply(e)},ajax:function(e,t){var n=this;n.xhr=new XMLHttpRequest,n.xhr.open("GET",e+"?term="+t,!0),n.xhr.addEventListener("readystatechange",function(){4==this.readyState&&200==this.status&&(n.words=JSON.parse(this.responseText),n.show(n))},!1),n.xhr.send()},show:function(e){e.container.innerHTML="",e.words.length&&(e.words.forEach(function(t){e.span=document.createElement("span"),e.span.innerHTML="object"!=typeof t?t:function(){return e.data=t,t[e.value]}(),e.span.style.display="block",e.span.style.textAlign="center",e.span.style.cursor="pointer",e.span.style.userSelect="none",e.span.style.WebKitUserSelect="none",e.span.style.MozUserSelect="none",e.span.addEventListener("mouseover",function(){(e.aux=e.container.querySelectorAll("."+e.cls)).length&&(e.aux[0].style.background=e.back||"lightyellow",e.aux[0].className=""),this.style.background=e.hover||"gold"},!1),e.span.addEventListener("mouseout",function(){this.style.background=e.back||"lightyellow"},!1),e.container.appendChild(e.span)}),e.container.style.display="block")},position:function(e){e.elem&&(e.container.style.width=e.elem.offsetWidth+"px",e.container.style.left=e.elem.offsetLeft+"px",e.container.style.top=e.elem.offsetTop+e.elem.offsetHeight+"px")},write:function(e,t){e.length&&(t.elem=this,t.position(t),"[object Array]"=={}.toString.call(t.source)?(t.words=[],t.source.forEach(function(n){n.toLowerCase().search(e.toLowerCase().trim())>-1&&-1==t.words.indexOf(n)&&t.words.push(n),t.show(t)})):/(php|asp|jsp|aspx)/gi.test(t.source.substr(t.source.lastIndexOf(".")+1))?t.ajax(t.source,e):(t.words=t.search.toLowerCase().search(e.toLowerCase().trim())>-1?[t.search]:[],t.show(t))),(!e.length||t.words&&!t.words.length)&&(t.container.style.display="none")},apply:function(e){var t,n,s,o=this;window.addEventListener("keyup",function(a){-1==[13,37,38,39,40].indexOf(a.keyCode)?(a.target.className==e||a.target.id==e)&&o.write.call(a.target,a.target.value,o):(t=[].slice.call(o.container.querySelectorAll("span")),40==a.keyCode&&(o.container.offsetHeight?o.container.querySelectorAll("."+o.cls).length?(n=o.container.querySelector("."+o.cls),s=t.indexOf(n)+1<t.length?t[t.indexOf(n)+1]:t[0],s.className=o.cls,s.style.background=o.hover||"gold",n.className="",n.style.background=o.back||"lightyellow"):(t[0].className=o.cls,t[0].style.background=o.hover||"gold"):a.target.value.length&&"none"==getComputedStyle(o.container)&&o.write.call(a.target,a.target.value,o)),38==a.keyCode&&o.container.offsetHeight&&(o.container.querySelectorAll("."+o.cls).length?(n=o.container.querySelector("."+o.cls),s=t.indexOf(n)-1>=0?t[t.indexOf(n)-1]:t[t.length-1],s.className=o.cls,s.style.background=o.hover||"gold",n.className="",n.style.background=o.back||"lightyellow"):(t[t.length-1].className=o.cls,t[t.length-1].style.background=o.hover||"gold")),13==a.keyCode&&o.container.offsetHeight&&((n=o.container.querySelector("."+o.cls))?(o.elem.value=n.innerHTML,o.container.style.display="none"):o.container.style.display="none"))},!1),window.addEventListener("click",function(){event.target.id!=o.id&&event.target.parentNode.id!=o.id&&(o.container.style.display="none"),event.target.parentNode.id==o.id&&(o.elem.value=event.target.innerHTML,o.container.style.display="none",o.select&&o.select(o.data,event.target))},!1),window.addEventListener("resize",o.position,!1)}};
